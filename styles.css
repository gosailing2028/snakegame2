/* 基础主题与变量 */
:root{
  --bg-grad: radial-gradient(1200px 800px at 20% 10%, #e0f2fe 0%, #f5f3ff 35%, #ffffff 100%);
  --glass-bg: rgba(255,255,255,0.6);
  --glass-stroke: rgba(255,255,255,0.8);
  --text: #0f172a;
  --muted: #475569;
  --primary: #6366f1;
  --danger: #ef4444;
  --accent: #06b6d4;
  --shadow: 0 10px 30px rgba(2,6,23,.1);
}
:root[data-theme="dark"]{
  --bg-grad: radial-gradient(1200px 800px at 80% 0%, #0b1220 0%, #0a0f1f 40%, #0b1220 100%);
  --glass-bg: rgba(15,23,42,0.45);
  --glass-stroke: rgba(100,116,139,0.35);
  --text: #e2e8f0;
  --muted: #94a3b8;
  --primary: #8b5cf6;
  --danger: #f87171;
  --accent: #22d3ee;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
}
:root[data-theme="neon"]{
  --bg-grad: radial-gradient(1000px 600px at 50% 0%, #0b0b2b 0%, #110b2b 60%, #030314 100%);
  --glass-bg: rgba(3,3,20,0.55);
  --glass-stroke: rgba(0,255,200,0.3);
  --text: #d9f99d;
  --muted: #a7f3d0;
  --primary: #22d3ee;
  --danger: #fb7185;
  --accent: #a78bfa;
  --shadow: 0 10px 40px rgba(34,211,238,.25);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:var(--text);
  background: var(--bg-grad);
  background-attachment: fixed;
  -webkit-tap-highlight-color: transparent;
}

.app{min-height:100%; display:flex; flex-direction:column; gap:16px; padding:20px; padding-bottom: calc(20px + env(safe-area-inset-bottom)); padding-left: calc(20px + env(safe-area-inset-left)); padding-right: calc(20px + env(safe-area-inset-right));}

.glass{
  background: var(--glass-bg);
  border: 1px solid var(--glass-stroke);
  backdrop-filter: blur(12px) saturate(140%);
  border-radius: 16px;
  box-shadow: var(--shadow);
}

.app__header,.app__footer{padding:14px 18px; display:flex; align-items:center; justify-content:space-between}
.brand{display:flex; align-items:center; gap:10px}
.logo{width:40px; height:40px}
.toolbar select{padding:6px 10px; border-radius:8px; border:1px solid var(--glass-stroke); background:transparent; color:var(--text)}

.app__main{display:grid; grid-template-columns: 320px 1fr; gap:16px}
.panel{padding:16px; display:flex; flex-direction:column; gap:16px}
.panel__group{display:flex; flex-direction:column; gap:10px}
.scoreboard{display:flex; align-items:center; justify-content:space-between; gap:16px; font-weight:600}
.actions{display:flex; gap:8px; flex-wrap:wrap}

.btn{padding:10px 14px; border-radius:10px; border:1px solid var(--glass-stroke); background:transparent; color:var(--text); cursor:pointer; min-height:40px}
.btn.primary{background: linear-gradient(135deg, var(--primary), var(--accent)); color:white; border:none}
.btn.danger{border-color:transparent; background: var(--danger); color:white}
.btn:active{transform:translateY(1px)}

.settings label{display:flex; align-items:center; gap:8px; justify-content:space-between}
.switch{gap:8px}

.stage{position:relative; display:flex; align-items:center; justify-content:center; padding:16px}
canvas{width:100%; height:auto; max-width:640px; border-radius:12px; background: rgba(255,255,255,0.35); border:1px solid var(--glass-stroke); touch-action:none; user-select:none; -webkit-user-select:none}

/* 移动端方向键 */
.dpad{position:absolute; right:calc(10px + env(safe-area-inset-right)); bottom:calc(10px + env(safe-area-inset-bottom)); display:none; flex-direction:column; gap:8px; z-index:5}
.dpad button{width:56px; height:56px; border-radius:12px; border:1px solid var(--glass-stroke); background:rgba(255,255,255,0.25); color:var(--text); font-size:16px}
.dpad__middle{display:flex; gap:8px; justify-content:center}

.app__footer{justify-content:center}

/* 响应式 */
@media (max-width: 980px){
  .app__main{grid-template-columns: 1fr}
  .dpad{display:flex}
  .dpad button{width:64px; height:64px; font-size:18px}
}